<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="design.css" rel="stylesheet">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!--
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    -->
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>
<style>
    h1   {text-align:center;}
</style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">CodeReview</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Changes
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="#">Open</a></li>
              <li><a class="dropdown-item" href="#">Approved</a></li>
              <li><a class="dropdown-item" href="#">Time Exceeded</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Repos</a>
          </li>
        </ul>
        <form class="d-flex">
          <div style="width: 100px; height: 25px; margin-top: 5px;">
          <a href="#">
            <img alt="Notifications" src="data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'%3E%3C!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --%3E%3Cpath d='M256 32V51.2C329 66.03 384 130.6 384 208V226.8C384 273.9 401.3 319.2 432.5 354.4L439.9 362.7C448.3 372.2 450.4 385.6 445.2 397.1C440 408.6 428.6 416 416 416H32C19.4 416 7.971 408.6 2.809 397.1C-2.353 385.6-.2883 372.2 8.084 362.7L15.5 354.4C46.74 319.2 64 273.9 64 226.8V208C64 130.6 118.1 66.03 192 51.2V32C192 14.33 206.3 0 224 0C241.7 0 256 14.33 256 32H256zM224 512C207 512 190.7 505.3 178.7 493.3C166.7 481.3 160 464.1 160 448H288C288 464.1 281.3 481.3 269.3 493.3C257.3 505.3 240.1 512 224 512z'/%3E%3C/svg%3E"
            width="100" height="25">
          </a>
        </div>
        </form>
        <form class="d-flex">
          <button class="btn btn-primary" type="submit">Logout</button>
        </form>
      </div>
    </div>
  </nav>
<h1><u>Create New Review</u></h1>
<br><br>

<div class="container" style="width: 50%; border-style:dashed;border-radius: 5px; padding: 10px; margin-left: auto; margin-right: auto;">
<form action="/CreateNewReview" method="post">
  Repository:
  <br>
  <select class="selectpicker" data-live-search="true">
    <% if (typeof(projects) != 'undefined') { %>
      <% for(var i=0; i < projects.length; i++) { %>
      <option data-tokens="<%= projects[i] %>"><%= projects[i] %></option>
        <% } %>
      <% } %>
  </select>
  <br>
  <br>
  <div class="form-group">
    <label for="RevTitle">Review Title:</label>
    <input name="reviewtitle" type="text" class="form-control" id="RevTitle" placeholder="Enter Review Title" required>
  </div>
  <br>
<div class="form-group">
  <label for="Code">Code:</label>
  <textarea name="code" class="form-control" id="Code" rows="5" required></textarea>
</div>
<div>
  <label for="Tags">Tags</label>
  <select class="selectpicker" id="selectTag" data-live-search="true">
    <% if (typeof(tags) != 'undefined') { %>
      <% for(var i=0; i < tags.length; i++) { %>
      <option data-tokens="<%= tags[i] %>"><%= tags[i].name %></option>
        <% } %>
      <% } %>
  </select>
</div>
<button class="btn btn-secondary" type="button" id="btn" name="add">add</button>
<p id="tagsList"></p>
    <br><br>
    <button class="btn" style="background-color: #99FF33;" type="button" id="upRevList" name="upRevList">Update Reviewers List</button>
    <div class="form-group">
    <label for="ChooseReviewers">Choose Reviewers:</label>
    <br>
    <div class="d-flex bd-highlight">
      <div class="d-flex justify-content-start">
    <select class="selectpicker" data-live-search="true" data-live-search-style="startsWith">
      <option data-tokens="Select1">Select1</option>
      <option data-tokens="Select2">Select2</option>
      <option data-tokens="Select3">Select3</option>
    </select>
  </div>
    <div class="p-2 bd-highlight" style="width: 50px; height: 50px; text-align: left;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"/></svg>
    </div>
    </div>  
  </div>
  <br><br>
  <div class="form-group" style="text-align: center;">
      <button type="submit" class="btn btn-primary">Create</button>
  </div>
  </form>
</div>
<script>
  var addTagToSet = document.getElementById("btn");
  const tags = new Set();
  addTagToSet.addEventListener("click",InsertTag);

  function InsertTag(event) {
    selectElement = document.querySelector('#selectTag');
    output = selectElement.value;
    tags.add(output);
    console.log(tags);
    tagsList = document.getElementById("tagsList");
    tagsList.innerHTML = 'Tags: #';
    tagsList.innerHTML += [...tags].join(', #');
    
  }

  $( document ).ready(function() {
    $("#upRevList").click(function(){
    tagsList = document.getElementById("tagsList");
    console.log("tags: "+tags);
    $.post('/createnewreview/updateList',
          {'tags': [...tags]},
          function(data) {
            alert("success " + data);
          }
    );
  });
});
  
</script>
</body>
</html>